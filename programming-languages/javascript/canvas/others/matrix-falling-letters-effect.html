<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Matrix falling letterds</title>
  </head>
  <body>
    <script>
      const canvas = document.createElement("canvas");
      const ctx = canvas.getContext("2d");
      canvas.setAttribute("width", "600px");
      canvas.setAttribute("height", "400px");
      canvas.style.background = "#000";
      document.body.prepend(canvas);

      const columns = 60;
      const textPos = Array(columns).join(0).split("");

      function matrixScreenVersion1() {
        let output = "Matrix Words";
        let posX = Math.random() * canvas.width;
        let posY = Math.random() * canvas.height;

        ctx.fillStyle = "rgba(0, 0, 0, .05)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        ctx.fillStyle = "green";
        ctx.fillText(output, posX, posY);
      }

      function matrixScreenVersion2() {
        let output = "0";
        ctx.fillStyle = "rgba(0, 0, 0, .05)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        ctx.fillStyle = "green";
        
        textPos.map((posY, index) => {
          // Estudar mais sobre este item: String.fromCarCode()
          output = String.fromCharCode(1e2 + Math.random() * 33);

          let posX = index * 10 + 10;

          if (posY > 100 + Math.random() * canvas.height) {
            textPos[index] = 0;
          } else {
            textPos[index] = posY + 10;
          }

          ctx.fillText(output, posX, posY);
        });
      }

      setInterval(matrixScreenVersion2, 50);
    </script>
  </body>
</html>
